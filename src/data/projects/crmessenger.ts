import type { Project } from './types';

/**
 * CRMessenger - Омниканальная платформа интеграции мессенджеров с CRM
 *
 * Enterprise-решение для централизованного управления клиентскими коммуникациями
 * через множество каналов (Telegram, WhatsApp) с автоматической синхронизацией в AmoCRM.
 *
 * Разработан командой из 7 человек за 1-2 месяца до стадии MVP.
 * Проект закрыт до выхода на бета-тест из-за pivot в сторону AI-продажника.
 */
export const crmessengerProject: Project = {
  id: 'crmessenger',
  title: 'CRMessenger',
  subtitle: 'Омниканальная платформа интеграции мессенджеров с CRM',
  featured: false,
  description: `
CRMessenger — это Enterprise B2B решение для централизованного управления клиентскими
коммуникациями через различные мессенджеры (Telegram, WhatsApp) с автоматической
синхронизацией в CRM-систему.

Основная ценность: менеджеры по продажам получают все обращения клиентов из разных
каналов в одном месте (AmoCRM), при этом могут отвечать прямо из CRM, а клиенты получают
ответы в их привычных мессенджерах. Двусторонняя синхронизация работает в реальном времени.

Ключевое УТП (в планах): эволюция в AI-продажника, где AI автоматически ведёт диалоги
с клиентами вместо менеджеров. Однако проект был закрыт на стадии MVP, до реализации
AI-функционала.
  `.trim(),

  // Визуальные элементы
  badges: [
    { text: 'Enterprise', variant: 'enterprise' },
    { text: 'Омниканал', variant: 'architecture' },
    { text: 'B2B SaaS', variant: 'enterprise' },
  ],

  metrics: [
    { label: 'Микросервисы', value: '6' },
    { label: 'Мессенджеры', value: '2' },
    { label: 'Разработка MVP', value: '2 мес' },
    { label: 'Команда', value: '6 человек' },
  ],

  // Executive Summary
  role: 'Tech Lead & Backend Developer',
  duration: '2 месяца (до MVP)',
  teamSize: '2 Backend (включая меня), 1 Frontend, 2 Designer, 1 PM',
  status: 'Проект закрыт до бета-теста. Pivot в сторону AI-продажника не состоялся',

  // Проблема и контекст
  businessProblem: 'Компании теряли клиентов и сделки из-за разрозненности коммуникаций: менеджеры переключались между множеством мессенджеров (личные WhatsApp, Telegram и др.), использовали частичные решения типа I2CRM, или вообще работали без автоматизации. В результате терялась история общения, не было централизованного контроля, клиенты не попадали в воронку продаж CRM.',

  solution: 'Создана омниканальная платформа с тремя ключевыми преимуществами: (1) Zero-setting подключение мессенджеров через QR-код — клиент сканирует и всё работает автоматически, (2) Двусторонняя синхронизация в реальном времени между мессенджерами и AmoCRM через REST API, (3) Автоматическое создание лидов и сделок из входящих сообщений с сохранением полной истории переписки.',

  challenges: [
    {
      title: 'Двусторонняя синхронизация данных',
      description: 'Обеспечить консистентность данных между мессенджерами и AmoCRM при одновременных действиях с обеих сторон (клиент пишет, менеджер отвечает)',
      solution: 'Реализована REST-based архитектура с чёткими flow: webhook от мессенджера → наш сервис → создание/обновление в AmoCRM. Обратно: webhook от AmoCRM → наш сервис → отправка в мессенджер. Использовали idempotency keys для предотвращения дубликатов сообщений.',
    },
    {
      title: 'Интеграция с WhatsApp',
      description: 'WhatsApp не предоставляет официальный Business API для малого и среднего бизнеса, нужно работать с WhatsApp Web Protocol через сторонние библиотеки',
      solution: 'Использовали библиотеку Whats Meow (Go) для работы с WhatsApp Web Protocol. Реализовали надёжную QR-авторизацию и управление сессиями. Написали отдельный микросервис на Go (вместо Python) из-за удобства библиотеки.',
    },
    {
      title: 'Zero-setting подключение мессенджеров',
      description: 'Клиенты не хотят разбираться в API ключах, webhook URL, настройках интеграций — нужно максимально упростить onboarding',
      solution: 'Реализовали подключение через QR-код: клиент просто сканирует QR в веб-интерфейсе, и вся настройка происходит автоматически. Для WhatsApp — стандартный Web Protocol flow. Для Telegram — авторизация через Telethon.',
    },
  ],

  // Ключевые возможности
  keyFeatures: [
    {
      title: '1. Интеграция с Telegram (Telethon)',
      description: 'Подключение Telegram-аккаунтов для приёма и отправки сообщений клиентам',
      technicalDetails: 'Микросервис на Python FastAPI с использованием библиотеки Telethon. Обработка входящих webhook от Telegram API, отправка сообщений через Bot API',
    },
    {
      title: '2. Интеграция с WhatsApp (Whats Meow)',
      description: 'Подключение WhatsApp-аккаунтов через WhatsApp Web Protocol с QR-авторизацией',
      technicalDetails: 'Отдельный микросервис на Go + Echo с библиотекой Whats Meow. Управление сессиями, обработка входящих сообщений, поддержка rich media (изображения, документы, голосовые)',
    },
    {
      title: '3. Двусторонняя синхронизация с AmoCRM',
      description: 'Автоматическая синхронизация сообщений между мессенджерами и сделками/контактами в AmoCRM',
      technicalDetails: 'REST API интеграция с AmoCRM API. Входящие сообщения создают/обновляют лиды и сделки. Исходящие сообщения из CRM отправляются клиентам в мессенджеры. Webhook от обеих сторон для real-time синхронизации',
    },
    {
      title: '4. Автоматическое создание лидов и сделок',
      description: 'Первое сообщение от нового клиента автоматически создаёт контакт и лид в AmoCRM',
      technicalDetails: 'При получении сообщения от нового номера/username система автоматически создаёт контакт в AmoCRM с заполнением данных из мессенджера, создаёт лид и прикрепляет сообщение',
    },
    {
      title: '5. QR-код авторизация аккаунтов',
      description: 'Zero-setting подключение: клиент сканирует QR-код и мессенджер подключается автоматически',
      technicalDetails: 'Веб-интерфейс с генерацией QR-кода для WhatsApp (через Whats Meow) и Telegram. Автоматическая настройка webhook и маршрутизации сообщений после успешной авторизации',
    },
    {
      title: '6. Поддержка Rich Media',
      description: 'Обработка и передача изображений, документов, голосовых сообщений между мессенджерами и CRM',
      technicalDetails: 'Скачивание медиа-файлов из мессенджеров, хранение, загрузка в AmoCRM. Обратная отправка медиа от менеджеров клиентам через API мессенджеров',
    },
    {
      title: '7. Управление платежами и подписками',
      description: 'Система тарифов и биллинга для B2B клиентов',
      technicalDetails: 'Отдельный микросервис payment для управления подписками, тарифными планами и биллингом',
    },
    {
      title: '8. Real-time уведомления менеджерам',
      description: 'Мгновенные уведомления о новых сообщениях от клиентов',
      technicalDetails: 'Webhook уведомления в AmoCRM, push-уведомления в веб-интерфейсе, интеграция с системой оповещений CRM',
    },
  ],

  // Архитектура
  architecture: 'Микросервисная архитектура (6 сервисов) с DDD и Clean Architecture, синхронная REST API коммуникация',

  microservices: [
    'account — Управление аккаунтами клиентов (компаний) платформы',
    'authentication — Аутентификация пользователей в системе',
    'authorization — Авторизация и управление правами доступа',
    'payment — Управление подписками, тарифами и биллингом',
    'telegram — Интеграция с Telegram через Telethon, обработка сообщений',
    'whatsapp — Интеграция с WhatsApp через Whats Meow (Go), управление сессиями',
  ],

  techStack: [
    'Python FastAPI',
    'Go + Echo',
    'PostgreSQL',
    'Redis',
    'AmoCRM API',
    'Telethon',
    'Whats Meow',
    'OpenTelemetry',
    'Grafana',
    'Loki',
    'Tempo',
    'VictoriaMetrics',
    'Docker',
  ],

  highlights: [
    'Спроектировал микросервисную архитектуру из 6 сервисов с DDD и Clean Architecture',
    'Реализовал двустороннюю синхронизацию между мессенджерами (Telegram, WhatsApp) и AmoCRM',
    'Создал Zero-setting подключение мессенджеров — клиент сканирует QR и всё работает',
    'Разработал автоматическое создание лидов и сделок из входящих сообщений',
    'Реализовал поддержку rich media (изображения, документы, голосовые сообщения)',
    'Настроил полный observability стек (OpenTelemetry, Grafana, Loki, Tempo, VictoriaMetrics)',
    'Использовал комбинацию Python и Go для оптимального решения разных задач',
    'Руководил командой как Tech Lead и писал код как Backend Developer',
  ],

  results: [
    {
      metric: 'Статус проекта',
      value: 'MVP готов',
      description: 'Завершена разработка полнофункционального MVP за 1-2 месяца',
    },
    {
      metric: 'Бета-тест',
      value: 'Не состоялся',
      description: 'Проект закрыт до выхода на бета-тестирование',
    },
    {
      metric: 'Причина закрытия',
      value: 'Pivot',
      description: 'Планировалась эволюция в AI-продажника (AI автоматически ведёт продажи), но pivot не состоялся',
    },
  ],

  feedback: 'Проект не вышел на продакшн, поэтому фидбек от реальных пользователей отсутствует.',
};
