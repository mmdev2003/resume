import type { Project } from './types';

export const finforumProject: Project = {
  id: 'finforum',
  title: 'FinForum',
  subtitle: 'Масштабируемая платформа для финансового сообщества',
  featured: true,
  description: `
FinForum — это B2C платформа для финансового сообщества с акцентом на масштабируемость,
real-time коммуникации и безопасность транзакций. Платформа объединяет традиционный форум
с современными возможностями: мгновенные уведомления, live обновления, Bitcoin платежи
и систему гаранта для безопасных сделок между пользователями.

Ключевое техническое решение  — масштабируемая архитектура real-time коммуникаций в Kubernetes:
WebSocket соединения распределены по pod'ам, а Kafka используется для маршрутизации сообщений
к правильному pod'у с активным соединением пользователя. Это позволило горизонтально масштабировать
WebSocket сервисы без потери соединений.
  `.trim(),

  // Визуальные элементы
  badges: [
    { text: 'B2C Platform', variant: 'social' },
    { text: 'Microservices', variant: 'architecture' },
    { text: 'Real-time', variant: 'backend' },
    { text: 'Web3 Payments', variant: 'web3' },
  ],

  metrics: [
    { label: 'Микросервисы', value: '11' },
    { label: 'Разработка', value: '3 мес' },
    { label: 'Команда', value: '6 человек' },
    { label: 'Test Coverage', value: '>80%' },
    { label: 'Tech Stack', value: 'Go + Kafka + K8s' },
  ],

  // Executive Summary
  role: 'Backend Lead Developer',
  duration: '3 месяца',
  teamSize: '6 человек: 2 backend (включая меня), 1 frontend, 2 designers, 1 PM',
  status: 'Передан заказчику для production использования',

  // Проблема и контекст
  businessProblem: 'Необходимость создания масштабируемой платформы для финансового сообщества с поддержкой real-time коммуникаций, безопасных сделок через систему гаранта и монетизации через покупку статусов и косметических улучшений с возможностью оплаты в Bitcoin.',

  solution: 'Создана микросервисная платформа с тремя ключевыми инновациями: (1) масштабируемая WebSocket архитектура в Kubernetes с Kafka-роутингом для поиска активных соединений, (2) event-driven архитектура через Kafka для асинхронной обработки не критичных операций, (3) интеграция Bitcoin платежей с системой гаранта для безопасных P2P сделок.',

  challenges: [
    {
      title: 'Масштабирование WebSocket соединений в Kubernetes',
      description: 'При горизонтальном масштабировании WebSocket pod\'ов возникала проблема: как отправить сообщение пользователю, если его соединение находится на другом pod\'е?',
      solution: 'Реализована Kafka-based архитектура маршрутизации: каждый pod публикует информацию о своих активных соединениях, а при отправке сообщения используется Kafka для доставки на правильный pod. Это позволило масштабировать WebSocket сервисы горизонтально без Single Point of Failure.',
    },
    {
      title: 'Асинхронная обработка задач без блокировки пользователя',
      description: 'Множество операций (уведомления, модерация, аналитика) не требуют мгновенного ответа, но блокируют основной поток обработки запроса',
      solution: 'Внедрена event-driven архитектура через Kafka: критичные операции обрабатываются синхронно, а остальные публикуются как события и обрабатываются асинхронно отдельными consumers. Это снизило latency основных операций на 60%.',
    },
    {
      title: 'Интеграция Bitcoin платежей с системой гаранта',
      description: 'Необходимость обеспечить безопасные P2P сделки: покупатель платит, средства блокируются, продавец выполняет обязательства, средства переводятся',
      solution: 'Разработан отдельный микросервис forum-payment с интеграцией Bitcoin кошелька и state machine для управления статусами транзакций. Система гаранта блокирует средства до подтверждения обеих сторон.',
    },
  ],

  // Ключевые возможности (10 детальных фич)
  keyFeatures: [
    {
      title: '1. Real-time коммуникации через WebSockets',
      description: 'Мгновенные обновления тем, новых сообщений, реакций пользователей в режиме реального времени',
      technicalDetails: 'WebSocket соединения управляются через отдельные pod\'ы в Kubernetes. Kafka используется для роутинга сообщений между pod\'ами, что позволяет горизонтально масштабировать WebSocket сервисы. При подключении пользователя pod регистрирует соединение в Redis для быстрого поиска.',
    },
    {
      title: '2. Микросервисная архитектура (11 сервисов)',
      description: 'Разделение ответственности по доменам: аутентификация, авторизация, форум, платежи, поддержка',
      technicalDetails: '11 независимых микросервисов на Golang (Echo framework) с pgx драйвером для PostgreSQL. Коммуникация через Kafka для асинхронных операций и REST API для синхронных. Каждый сервис имеет свою БД (database per service pattern).',
    },
    {
      title: '3. Система модерации контента',
      description: 'Инструменты модерации: бан пользователей, удаление контента, система жалоб, модераторская панель',
      technicalDetails: 'Workflow модерации через state machine: жалоба → проверка → действие → логирование. RBAC система с гранулярными правами для модераторов разных уровней. Все действия логируются в audit log.',
    },
    {
      title: '4. Система покупки статусов и косметических улучшений',
      description: 'Монетизация через продажу премиум статусов, бейджей, цветов ников, уникальных аватаров',
      technicalDetails: 'Каталог покупаемых items в forum-status сервисе. Интеграция с forum-payment для обработки платежей. После успешной оплаты items применяются к профилю пользователя через событие в Kafka.',
    },
    {
      title: '5. Bitcoin платежная система',
      description: 'Прием платежей в Bitcoin за премиум функции, статусы и P2P сделки',
      technicalDetails: 'Интеграция Bitcoin кошелька в forum-payment сервисе. Генерация уникальных адресов для каждого платежа, мониторинг blockchain для подтверждения транзакций, webhook\'и для уведомления об успешной оплате.',
    },
    {
      title: '6. Система гаранта для безопасных сделок',
      description: 'P2P сделки между пользователями с блокировкой средств до выполнения обязательств',
      technicalDetails: 'State machine в forum-payment: создание сделки → оплата покупателем → блокировка средств → подтверждение продавца → подтверждение покупателя → перевод средств. Тайм-ауты и dispute resolution механизм при конфликтах.',
    },
    {
      title: '7. Система личных сообщений',
      description: 'Приватные диалоги между пользователями с real-time доставкой',
      technicalDetails: 'Отдельный микросервис для личных сообщений с поддержкой WebSocket для мгновенной доставки. История сообщений в PostgreSQL, онлайн-статусы в Redis, типизация (прочитано/не прочитано) через события.',
    },
    {
      title: '8. Чат с технической поддержкой',
      description: 'Система тикетов и live чат с поддержкой для решения проблем пользователей',
      technicalDetails: 'Тикет-система с приоритетами, категориями, SLA. Real-time чат через WebSocket между пользователем и саппорт-оператором. История обращений, templates для частых вопросов, метрики времени ответа.',
    },
    {
      title: '9. Продвинутая система прав и авторизации',
      description: 'RBAC система с гранулярными правами: пользователь, модератор, администратор',
      technicalDetails: 'Отдельный forum-authorization сервис с проверкой прав на основе ролей и permissions. JWT токены с встроенными claims о правах пользователя. Middleware для проверки прав в каждом микросервисе.',
    },
    {
      title: '10. Умная система уведомлений (forum-notification)',
      description: 'Multi-channel уведомления: email, push, WebSocket с настройками предпочтений пользователя',
      technicalDetails: 'Event-driven обработка через Kafka: сервисы публикуют события, forum-notification подписан на них и отправляет уведомления согласно настройкам пользователя. Батчинг уведомлений для снижения spam\'а.',
    },
  ],

  // Архитектура
  architecture: 'Микросервисная архитектура (11 сервисов) с event-drive, DDD, Clean architecture и коммуникацией через Kafka, REST API для синхронных операций, WebSockets для real-time, deployment в Kubernetes',

  microservices: [
    'forum-authentication — Аутентификация пользователей: регистрация, логин, ',
    'forum-authorization — Авторизация и управление правами: JWT токены',
    'forum-dialog — Система личных сообщений: приватные чаты, история, статусы прочтения',
    'forum-thread — Форумные темы и сообщения: создание тем, ответы, реакции, поиск',
    'forum-frame — Управление косметическими рамками',
    'forum-status — Статусы и косметика: премиум статусы, бейджи, customization профилей',
    'forum-user — Профили пользователей: данные профиля, настройки, аватары, статистика',
    'forum-payment — Платежная система: Bitcoin интеграция, система гаранта, история транзакций',
    'forum-admin — Административная панель: управление платформой, аналитика, конфигурация',
    'forum-notification — Система уведомлений: email, push, WebSocket уведомления, preferences',
    'forum-support — Техническая поддержка: тикет-система, live чат с операторами, knowledge base',
  ],

  techStack: [
    'Golang',
    'Echo Framework',
    'pgx (PostgreSQL driver)',
    'PostgreSQL',
    'Redis',
    'Apache Kafka',
    'WebSockets',
    'Kubernetes',
    'Docker',
    'React',
    'Bitcoin Integration',
    'JWT Authentication',
    'REST API',
    'Event-Driven Architecture',
    'Clean Architecture',
    'DDD',
  ],

  highlights: [
    'Спроектировал и реализовал масштабируемую WebSocket архитектуру в Kubernetes',
    'Разработал event-driven архитектуру на Kafka, снизившую latency критичных операций на 60%',
    'Создал систему гаранта для безопасных P2P Bitcoin сделок с state machine управлением',
    'Достиг >80% покрытия кодовой базы тестами (unit, integration, e2e)',
    'Реализовал real-time коммуникации с горизонтальным масштабированием через Kafka message routing',
    'Интегрировал Bitcoin платежи с генерацией уникальных адресов и мониторингом blockchain',
    'Настроил CI/CD pipeline с автоматическим deployment в Kubernetes',
    'Разработал multi-channel систему уведомлений с event-driven обработкой и user preferences',
    'Создал техническую поддержку с тикет-системой и real-time чатом с операторами',
  ],

  results: [
    {
      metric: 'Качество кода',
      value: '>80% test coverage',
      description: 'Высокое покрытие unit, integration и e2e тестами',
    },
    {
      metric: 'Архитектура',
      value: '11 микросервисов',
      description: 'Масштабируемая микросервисная архитектура с четким разделением ответственности',
    },
    {
      metric: 'Разработка',
      value: '3 месяца',
      description: 'Быстрая разработка полнофункциональной платформы командой из 6 человек',
    },
    {
      metric: 'Производительность',
      value: '-60% latency',
      description: 'Снижение задержки критичных операций благодаря event-driven архитектуре',
    },
    {
      metric: 'Статус',
      value: 'Production',
      description: 'Проект передан заказчику и используется в production',
    },
  ],

  feedback: 'Проект успешно передан заказчику и запущен в production. Архитектурные решения (WebSocket масштабирование через Kafka, event-driven подход) доказали свою эффективность и масштабируемость.',
};
