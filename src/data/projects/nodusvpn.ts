import type { Project } from './types';

export const nodusVPNProject: Project = {
  id: 'NodusVPN',
  title: 'NodusVPN',
  subtitle: 'Децентрализованная VPN-экосистема на блокчейне',
  metrics: [
    { label: 'Smart-контракты', value: '5' },
    { label: 'VPN протоколы', value: '3' },
    { label: 'Тестовые ноды', value: '5' },
    { label: 'Разработка', value: '2 мес' },
    { label: 'Команда', value: '5 человек' },
  ],

  description: `
    NodusVPN — это децентрализованная VPN-платформа на базе технологии блокчейн и P2P-сети, где пользователи одновременно являются и потребителями, и операторами VPN-нод. Проект решает проблему централизованных VPN-сервисов: единые точки отказа, цензура со стороны провайдеров, непрозрачность использования данных и высокая стоимость подписок.

    Основная идея заключается в создании самоподдерживающейся экосистемы: любой пользователь может запустить VPN-ноду на своем сервере, предоставлять трафик другим участникам сети и получать за это криптовалютное вознаграждение. Клиенты платят за использование VPN напрямую операторам нод через смарт-контракты на блокчейне Polygon, минуя посредников.

    Проект реализует уникальную архитектуру без традиционного централизованного бэкенда. Вся бизнес-логика вознаграждений, подписок и управления заложена в смарт-контрактах. Для обеспечения качества работы сети разработаны два специализированных Python-агента: один мониторит работоспособность и честность VPN-нод (проверяет uptime, bandwidth, latency), второй отслеживает подписки клиентов и автоматически распределяет платежи между операторами.

    Ключевая техническая сложность проекта — верификация честности нод в децентрализованной среде. Операторы нод могут пытаться обмануть систему, завышая свои метрики для получения большего вознаграждения. Для решения этой проблемы была разработана комбинированная система: агенты мониторинга проводят случайные проверки через прокси, а смарт-контракт применяет штрафы к нодам с низкой репутацией.

    Платформа поддерживает три VPN-протокола одновременно (OpenVPN, WireGuard, VLESS), что обеспечивает гибкость для разных сценариев использования. Управление экосистемой децентрализовано через DAO: держатели токенов голосуют за изменения параметров вознаграждений, пороговых значений качества и других ключевых параметров сети.
  `,

  role: 'Tech Lead & Blockchain Developer',
  duration: '2 месяца',
  teamSize: '5 человек: Tech Lead, Frontend Developer, Product Manager, 2 UI/UX Designers',
  status: 'Проект заморожен по решению заказчика после успешного технического POC. MVP разработан, тестовые ноды запущены и работали стабильно.',


  businessProblem: `
    Современные централизованные VPN-сервисы имеют ряд критических недостатков: единые точки отказа (блокировка провайдера = недоступность сервиса), непрозрачность обработки данных, высокая стоимость подписок (до $10-15/месяц), уязвимость к цензуре со стороны государств и корпораций. Пользователи не имеют контроля над инфраструктурой и вынуждены доверять третьей стороне свой приватный трафик.
  `,

  solution: `
    Децентрализованная P2P VPN-экосистема на блокчейне с тремя ключевыми инновациями
    
    1. Криптоэкономическая модель: Любой может стать оператором ноды и зарабатывать токены за предоставление VPN-трафика. Вознаграждения рассчитываются автоматически смарт-контрактами на основе объема трафика, uptime и репутации.

    2. Верификация честности без доверия: Специализированные агенты мониторинга проводят случайные проверки нод, валидируя их метрики (bandwidth, latency, uptime). Недобросовестные операторы получают штрафы и теряют репутацию.

    3. Архитектура без бэкенда: Вся бизнес-логика заложена в смарт-контракты на Polygon. Вместо централизованного сервера — два легковесных Python-агента для мониторинга.
  `,

  challenges: [
    {
      title: 'Верификация честности нод в P2P-сети',
      description: 'Критическая проблема любой децентрализованной сети: операторы VPN-нод могут завышать свои метрики (uptime, bandwidth, качество соединения) для получения большего вознаграждения. В отличие от централизованных систем, здесь нет доверенной третьей стороны, которая могла бы проверить реальные показатели.',
      solution: 'Разработана двухуровневая система верификации: (1) Python-агенты мониторинга проводят случайные проверки нод через различные прокси, измеряя реальный bandwidth и latency, (2) Смарт-контракт ведет систему репутации: ноды с низкими показателями получают меньше вознаграждений и могут быть исключены из сети через голосование DAO. Также реализован механизм взаимной проверки: клиенты могут сообщать о плохом качестве конкретной ноды, что снижает ее репутацию.',
    },
    {
      title: 'DAO governance для децентрализованного управления',
      description: 'Экосистема должна управляться самими участниками без центрального органа. Необходимо реализовать механизм голосования по важным параметрам: размер вознаграждений, пороги качества для нод, комиссии платформы. При этом нужно защититься от атак (например, whale attack — когда один крупный держатель токенов контролирует голосование).',
      solution: 'Разработана DAO-архитектура с взвешенным голосованием: (1) Вес голоса зависит от стейка токенов и времени их удержания (discourages short-term speculation), (2) Timelock для критических изменений — любое одобренное предложение вступает в силу через 48 часов, что дает участникам время на оценку и выход из экосистемы если они не согласны, (3) Квадратичное голосование для особо важных решений — снижает влияние крупных держателей, (4) Система делегирования — пользователи могут передать свой голос доверенному участнику.',
    },
    {
      title: 'Мультипротокольная поддержка VPN',
      description: 'Разные операторы нод используют различные серверные конфигурации и имеют разные технические возможности. Одни предпочитают легковесный WireGuard, другие — классический OpenVPN, третьи хотят использовать современный VLESS для обхода блокировок. Необходимо обеспечить единый интерфейс управления для всех протоколов при их фундаментальных различиях в настройке и API.',
      solution: 'Создана абстрактная архитектура VPN-ноды с унифицированным Python API: (1) Базовый класс VPNNode с общими методами (start, stop, getMetrics, rotateKeys), (2) Специфичные имплементации для каждого протокола (OpenVPNNode, WireGuardNode, VLESSNode), (3) Docker-контейнеризация каждой ноды для изоляции и упрощения деплоя, (4) Health-check эндпоинт у каждой ноды для мониторинга.',
    },
  ],

  keyFeatures: [
    {
      title: '1. Регистрация и управление VPN-нодами (Solidity + Polygon)',
      description: 'Операторы регистрируют свои ноды через смарт-контракт, указывая endpoint, поддерживаемые протоколы (OpenVPN/WireGuard/VLESS)',
      technicalDetails: 'Смарт-контракт NodeRegistry.sol хранит маппинг address => Node структур.',
    },
    {
      title: '2. Мультипротокольная VPN инфраструктура (Python)',
      description: 'Платформа поддерживает три VPN-протокола одновременно, позволяя операторам выбрать оптимальный для их инфраструктуры. Клиенты автоматически подключаются через наиболее подходящий протокол.',
      technicalDetails: 'Python daemon на стороне оператора управляет Docker контейнерами с VPN-серверами.',
    },
    {
      title: '3. Система криптовалютных вознаграждений через смарт-контракты',
      description: 'Операторы нод автоматически получают вознаграждение за предоставленный трафик. Расчет производится на основе объема трафика, uptime и reputation score.',
      technicalDetails: 'Reward Distribution контракт аккумулирует платежи клиентов и раз в 6 часов вызывает функцию batchDistribute(), которая распределяет токены между операторами пропорционально их вкладу. Формула: reward = (traffic_gb * base_rate * reputation_multiplier * uptime_percentage). Используется pull-pattern: операторы сами вызывают withdraw() для вывода накопленных средств (экономия газа). События RewardCalculated и RewardWithdrawn для прозрачности.',
    },
    {
      title: '4. DAO governance с токен-голосованием',
      description: 'Децентрализованное управление экосистемой: участники голосуют за изменения параметров платформы, используя governance токены.',
      technicalDetails: 'Governance контракт реализует паттерн Governor от OpenZeppelin. Любой держатель токенов может создать proposal (требуется минимальный стейк 10000 токенов). Голосование длится 7 дней. Для принятия нужен quorum в 10% от total supply и простое большинство. Критические изменения (например, изменение reward formula) проходят через Timelock контракт с задержкой 48 часов. Интеграция с Snapshot для off-chain голосования по некритичным вопросам.',
    },
    {
      title: '5. Агенты мониторинга качества нод (Python)',
      description: 'Два специализированных Python-агента заменяют традиционный бэкенд: один мониторит работу VPN-нод, второй управляет подписками клиентов.',
      technicalDetails: 'Node Monitor Agent: работает на облачных серверах в разных регионах, каждые 15 минут проверяет случайные ноды через прокси (connect test, bandwidth test через iperf3, latency measurement). Результаты публикуются в IPFS и hash отправляется в смарт-контракт. Subscription Agent: слушает события blockchain (NewSubscription, SubscriptionExpired), отправляет email уведомления через SendGrid API, обновляет access control lists нод. Оба агента stateless и могут запускаться в нескольких экземплярах для resilience.',
    },
    {
      title: '6. Система репутации для защиты от недобросовестных операторов',
      description: 'Каждая VPN-нода имеет reputation score, который влияет на размер вознаграждений и видимость в списке доступных нод.',
      technicalDetails: 'Reputation score (0-100) хранится on-chain и обновляется по результатам проверок. Формула: initial_score=50, за успешную проверку +1, за неуспешную -5, за жалобу клиента -3. Score < 30 → нода помечается как "unreliable" и получает 50% penalty к rewards. Score < 10 → автоматический ban до review через DAO. Операторы могут оспорить низкий score через governance proposal. История изменений репутации публично доступна для прозрачности.',
    },
    {
      title: '7. Интеграция с криптовалютными кошельками',
      description: 'Пользователи оплачивают подписки напрямую через Web3 кошельки (MetaMask, WalletConnect), без посредников и регистрации.',
      technicalDetails: 'Frontend интегрирован с ethers.js и WalletConnect v2 для подключения кошельков. При покупке подписки вызывается метод buySubscription(duration) смарт-контракта Subscription.sol, который переводит токены на адрес контракта и эмитирует событие. Gas optimization: используется ERC20 permit для approve+transfer в одной транзакции. Поддержка ENS для human-readable адресов. Интеграция с Web3Modal для universal wallet support.',
    },
    {
      title: '8. Proof-of-Uptime механизм для честного учета',
      description: 'Система доказательства работоспособности ноды, которая защищена от манипуляций со стороны операторов.',
      technicalDetails: 'Каждая нода должна каждый час отправлять heartbeat в смарт-контракт с подписанным timestamp. Monitoring Agent случайным образом проверяет соответствие заявленного uptime реальному (connect attempts). Если нода заявляет 99% uptime, но failed 50% проверок агента за последние 24 часа — применяется penalty. Используется cryptographic challenge-response: агент отправляет ноде случайный nonce, нода должна вернуть его hash с приватным ключом (доказательство, что она online и имеет доступ к ключам).',
    },
    {
      title: '9. Децентрализованное хранилище конфигураций (IPFS)',
      description: 'Конфигурации VPN-нод (ovpn-файлы, WireGuard configs) хранятся в IPFS для обеспечения доступности без централизованного сервера.',
      technicalDetails: 'При регистрации ноды оператор загружает конфигурационные файлы в IPFS через Pinata API. IPFS hash сохраняется в смарт-контракт. Клиенты скачивают конфиги напрямую из IPFS по hash. Используется IPFS Cluster для redundancy (файлы пиннятся на нескольких нодах). Конфиги зашифрованы симметричным ключом, который передается клиенту после оплаты подписки через encrypted message в blockchain.',
    },
    {
      title: '10. Автоматическое распределение трафика (Load Balancing)',
      description: 'Клиентское приложение автоматически выбирает оптимальную ноду на основе геолокации, нагрузки и репутации.',
      technicalDetails: 'Frontend запрашивает у субграфа список active нод, фильтрует по параметрам (protocol, min_reputation, max_price), затем делает latency test к топ-5 нодам через WebRTC или HTTP ping. Выбирается нода с лучшим соотношением latency/price/reputation. Если текущая нода падает — automatic failover на следующую в списке. Используется алгоритм weighted round-robin для равномерного распределения нагрузки.',
    },
  ],

  architecture: 'Уникальная архитектура без традиционного централизованного бэкенда. Вся бизнес-логика заложена в смарт-контракты на блокчейне Polygon (7 основных компонентов). Вместо монолитного сервера используются два легковесных stateless Python-агента для мониторинга и управления, которые могут работать в любой точке мира. VPN-ноды полностью автономны и управляются операторами через Docker.',

  microservices: [
    'Smart Contracts (Solidity) — вся бизнес-логика: регистрация нод, подписки, вознаграждения, DAO governance. Deployed на Polygon для низких комиссий',
    'Node Monitor Agent (Python) — мониторинг качества VPN-нод: проверка uptime, bandwidth, latency через случайные проверки. Публикация результатов в IPFS',
    'Subscription Agent (Python) — управление подписками клиентов: слушает blockchain события, отправляет уведомления, обновляет ACL',
    'VPN Nodes (Python + Docker) — автономные VPN-серверы операторов. Поддержка OpenVPN, WireGuard, VLESS. REST API для управления',
    'Frontend (React + ethers.js) — клиентское приложение для подключения к VPN, покупки подписок, управления нодами (для операторов)',
    'The Graph Subgraph — индексация событий blockchain для быстрого поиска нод и истории транзакций',
    'IPFS — децентрализованное хранилище конфигураций VPN и результатов мониторинга',
  ],

  techStack: [
    'Solidity — разработка смарт-контрактов',
    'Polygon (MATIC) — блокчейн для deployment контрактов (L2 для низких комиссий)',
    'Python — VPN-ноды и агенты мониторинга',
    'OpenVPN — один из поддерживаемых VPN-протоколов',
    'WireGuard — современный быстрый VPN-протокол',
    'VLESS (v2ray) — протокол для обхода блокировок',
    'Hardhat — фреймворк для разработки и тестирования контрактов',
    'ethers.js — библиотека для взаимодействия с Ethereum/Polygon',
    'Web3Modal — universal wallet connection',
    'WalletConnect v2 — подключение мобильных кошельков',
    'The Graph — индексация blockchain событий',
    'IPFS — децентрализованное хранилище',
    'Docker — контейнеризация VPN-нод',
    'React — клиентское приложение',
    'TypeScript — типизация frontend кода',
    'OpenZeppelin Contracts — готовые паттерны для governance',
    'iperf3 — тестирование bandwidth',
    'Pinata — IPFS pinning service',
    'SendGrid — email уведомления',
    'PostgreSQL — локальный кеш агентов (не критичен, можно потерять)',
  ],

  highlights: [
    'Разработана уникальная архитектура VPN-платформы БЕЗ централизованного бэкенда — вся логика в смарт-контрактах',
    'Реализована мультипротокольная поддержка: OpenVPN, WireGuard, VLESS в едином интерфейсе',
    'Создана система верификации честности нод с защитой от манипуляций метриками',
    'Разработано 5 Solidity смарт-контрактов: NodeRegistry, RewardDistribution, Subscription, Governance, Reputation',
    'Построена DAO governance система с weighted voting и timelock для критических изменений',
    '2 специализированных Python-агента заменили традиционный бэкенд (stateless и scalable)',
    'Оптимизирован gas расход: batch payments, lazy evaluation, packed structs',
    'Интегрирован полный цикл Web3: WalletConnect, MetaMask, ENS, The Graph',
    'Запущено и протестировано 3-5 VPN-нод в различных регионах',
    'Реализован proof-of-uptime механизм с cryptographic challenge-response',
  ],

  results: [
    {
      metric: 'Development Time',
      value: '2 месяца до MVP',
      description: 'От концепции до рабочего прототипа с тестовыми нодами',
    },
    {
      metric: 'Test Network',
      value: '3-5 VPN-нод',
      description: 'Успешно запущены и работали стабильно в тестовой сети',
    },
    {
      metric: 'Smart Contracts',
      value: '5 контрактов',
      description: 'Полный набор для децентрализованной VPN-экосистемы',
    },
    {
      metric: 'Technical POC',
      value: 'Доказан',
      description: 'Архитектура без бэкенда показала работоспособность, все ключевые технические риски закрыты',
    },
  ],

  feedback: 'Проект заморожен по решению заказчика после успешного технического POC. Все ключевые технические риски были закрыты: верификация честности нод работала, мультипротокольная инфраструктура развернута, смарт-контракты оттестированы. Причина заморозки — стратегическое решение бизнеса, не связанное с технической реализацией.',

  featured: false,

  badges: [
    { text: 'Blockchain', variant: 'web3' },
    { text: 'VPN', variant: 'architecture' },
  ],
};

